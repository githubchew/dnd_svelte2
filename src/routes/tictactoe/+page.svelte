<script>
	let board = Array(9).fill(null);
	let currentPlayer = 'X';
	let winner = null;
	let winningCombination = null;
	let words = Array.from(
		new Set([
			'dragonğŸ‰',
			'unicornğŸ¦„',
			'rocketğŸš€',
			'cactusğŸŒµ',
			'fireğŸ”¥',
			'moonğŸŒ™',
			'sunğŸŒ',
			'starâ­',
			'cloudâ˜ï¸',
			'rainbowğŸŒˆ',
			'coffeeâ˜•',
			'bookğŸ“š',
			'camerağŸ“·',
			'globeğŸŒ',
			'heartâ¤ï¸',
			'lightningâš¡',
			'umbrellaâ˜‚ï¸',
			'anchorâš“',
			'crownğŸ‘‘',
			'gemğŸ’',
			'volcanoğŸŒ‹',
			'earthğŸŒ',
			'cometâ˜„ï¸',
			'robotğŸ¤–',
			'alienğŸ‘½',
			'medalğŸ…',
			'trophyğŸ†',
			'medalğŸ¥‡',
			'medalğŸ¥ˆ',
			'medalğŸ¥‰',
			'balloonğŸˆ',
			'partyğŸ‰',
			'giftğŸ',
			'clownğŸ¤¡',
			'ghostğŸ‘»',
			'jack-o-lanternğŸƒ',
			'skullğŸ’€',
			'batğŸ¦‡',
			'owlğŸ¦‰',
			'catğŸˆ',
			'dogğŸ•',
			'foxğŸ¦Š',
			'butterflyğŸ¦‹',
			'beeğŸ',
			'bugğŸ›',
			'antğŸœ',
			'beetleğŸ',
			'snailğŸŒ',
			'cricketğŸ¦—',
			'dragonflyğŸ¦Ÿ',
			'caterpillarğŸ›',
			'lobsterğŸ¦',
			'shrimpğŸ¦',
			'squidğŸ¦‘',
			'jellyfishğŸª¼',
			'coralğŸª¸',
			'seaweedğŸŒ¿',
			'pearlğŸ¦ª',
			'mermaidğŸ§œâ€â™€ï¸',
			'mermanğŸ§œâ€â™‚ï¸',
			'tridentğŸ”±',
			'pirateğŸ´â€â˜ ï¸',
			'vampireğŸ§›â€â™‚ï¸',
			'zombieğŸ§Ÿâ€â™‚ï¸',
			'genieğŸ§â€â™‚ï¸',
			'fairyğŸ§šâ€â™€ï¸',
			'elfğŸ§â€â™‚ï¸',
			'centaurğŸ§â€â™€ï¸',
			'minotaurğŸ§Ÿâ€â™€ï¸',
			'cyclopsğŸ‘ï¸',
			'phoenixğŸ¦…',
			'griffinğŸ¦…',
			'pegasusğŸ¦„',
			'krakenğŸ¦‘',
			'leviathanğŸ‰',
			'cerberusğŸ•',
			'hydrağŸ‰',
			'medusağŸ',
			'harpyğŸ¦…',
			'sphinxğŸ¦',
			'werewolfğŸº',
			'loch ness monsterğŸ‰',
			'bigfootğŸ¦¶',
			'yetiğŸ¦¶',
			'chupacabrağŸ',
			'jackalopeğŸ‡',
			'desertğŸœï¸',
			'oasisğŸï¸',
			'camelğŸª',
			'caravanğŸœï¸',
			'appleğŸ',
			'bananağŸŒ',
			'cherryğŸ’',
			'watermelonğŸ‰',
			'strawberryğŸ“',
			'whaleğŸ‹',
			'dolphin ğŸ¬',
			'grapeğŸ‡',
			'ice cream ğŸ¦',
			'going homeğŸ ',
			'going to schoolğŸ«',
			'chocolateğŸ«',
			'pizzağŸ•',
			'burgerğŸ”',
			'hot dogğŸŒ­',
			'sandwichğŸ¥ª',
			'cookieğŸª',
			'cakeğŸ°',
			'penguinğŸ§',
			'tigerğŸ¯',
			'lionğŸ¦',
			'elephantğŸ˜',
			'monkeyğŸ’',
			'bearğŸ»',
			'dogğŸ¶',
			'catğŸ±',
			'birdğŸ¦',
			'horseğŸ´',
			'sheepğŸ‘',
			'cowğŸ„',
			'pigğŸ·',
			'chickenğŸ”',
			'duckğŸ¦†',
			'turkeyğŸ¦ƒ',
			'goatğŸ',
			'rabbitğŸ°',
			'wolfğŸº',
			'turtleğŸ¢',
			'snakeğŸ',
			'fishğŸŸ',
			'octopusğŸ™',
			'crabğŸ¦€',
			'sharkğŸ¦ˆ',
			'seahorseğŸ´',
			'starfishğŸŸ',
			'NOUNS',
			'apple',
			'baby',
			'back',
			'ball',
			'bear',
			'bed',
			'bell',
			'bird',
			'birthday',
			'boat',
			'box',
			'boy',
			'bread',
			'brother',
			'cake',
			'car',
			'cat',
			'chair',
			'chicken',
			'children',
			'Christmas',
			'coat',
			'corn',
			'cow',
			'day',
			'dog',
			'doll',
			'door',
			'duck',
			'egg',
			'eye',
			'farm',
			'farmer',
			'father',
			'feet',
			'fire',
			'fish',
			'floor',
			'flower',
			'game',
			'garden',
			'girl',
			'goodbye',
			'grass',
			'ground',
			'hand',
			'head',
			'hill',
			'home',
			'horse',
			'house',
			'kitty',
			'leg',
			'letter',
			'man',
			'men',
			'milk',
			'money',
			'morning',
			'mother',
			'name',
			'nest',
			'night',
			'paper',
			'party',
			'picture',
			'pig',
			'rabbit',
			'rain',
			'ring',
			'robin',
			'Santa Claus',
			'school',
			'seed',
			'sheep',
			'shoe',
			'sister',
			'snow',
			'song',
			'squirrel',
			'stick',
			'street',
			'sun',
			'table',
			'thing',
			'time',
			'top',
			'toy',
			'tree',
			'watch',
			'water',
			'way',
			'wind',
			'window',
			'wood',
			'ğŸ§¦socks',
			'ğŸ‘•shirt',
			'ğŸ‘ shoe',
			'ğŸ‘Ÿsneaker',
			'ğŸ‘’hat',
			'ğŸ•pizza',
			'ğŸ°rabbit',
			'ğŸ¦Šfox',
			'ğŸ»bear',
			'ğŸ¼panda',
			'ğŸ¨koala',
			'ğŸ¯tiger',
			'â˜ƒï¸snowman',
			'ğŸªkite',
			'ğŸˆballoon',
			'ğŸgift',
			'ğŸ‚cake',
			'ğŸ¬candy',
			'ğŸ«chocolate',
			'ğŸ­lollipop',
			'ğŸ§¸teddybear',
			'ğŸ‰dragon',
			'ğŸ¦„unicorn',
			'ğŸš€rocket',
			'ğŸŒµcactus',
			'ğŸ”¥fire',
			'ğŸŒ™moon',
			'ğŸŒsun',
			'â­star',
			'â˜ï¸cloud',
			'ğŸŒˆrainbow',
			'â˜•coffee',
			'ğŸ“šbook',
			'ğŸ“·camera',
			'ğŸŒglobe',
			'â¤ï¸heart',
			'âš¡lightning',
			'â˜‚ï¸umbrella',
			'âš“anchor',
			'ğŸ‘‘crown',
			'ğŸ’gem',
			'ğŸŒ‹volcano',
			'ğŸŒearth',
			'â˜„ï¸comet',
			'ğŸ¤–robot',
			'ğŸ‘½alien',
			'ğŸ…medal',
			'ğŸ†trophy',
			'ğŸ‰party',
			'ğŸ¤¡clown',
			'ğŸ‘»ghost',
			'ğŸƒjack-o-lantern',
			'ğŸ’€skull',
			'ğŸ¦‡bat',
			'ğŸ¦‰owl',
			'ğŸˆcat',
			'ğŸ•dog',
			'ğŸ¦‹butterfly',
			'ğŸbee',
			'ğŸ›bug',
			'ğŸœant',
			'ğŸbeetle',
			'ğŸŒsnail',
			'ğŸ¦—cricket',
			'ğŸ¦Ÿdragonfly',
			'ğŸ›caterpillar',
			'ğŸ¦lobster',
			'ğŸ¦shrimp',
			'ğŸ¦‘squid',
			'ğŸª¼jellyfish',
			'ğŸª¸coral',
			'ğŸŒ¿seaweed',
			'ğŸ¦ªpearl',
			'ğŸ§œâ€â™€ï¸mermaid',
			'ğŸ§œâ€â™‚ï¸merman',
			'ğŸ”±trident',
			'ğŸ´â€â˜ ï¸pirate',
			'ğŸ§›â€â™‚ï¸vampire',
			'ğŸ§Ÿâ€â™‚ï¸zombie',
			'ğŸ§â€â™‚ï¸genie',
			'ğŸ§šâ€â™€ï¸fairy',
			'ğŸ§â€â™‚ï¸elf',
			'ğŸ§â€â™€ï¸centaur',
			'ğŸ§Ÿâ€â™€ï¸minotaur',
			'ğŸ‘ï¸cyclops',
			'ğŸ¦…phoenix',
			'ğŸ¦…griffin',
			'ğŸ¦„pegasus',
			'ğŸ¦‘kraken',
			'ğŸ‰leviathan',
			'ğŸ•cerberus',
			'ğŸ‰hydra',
			'ğŸmedusa',
			'ğŸ¦…harpy',
			'ğŸ¦sphinx',
			'ğŸºwerewolf',
			'ğŸ‰loch ness monster',
			'ğŸ¦¶bigfoot',
			'ğŸ¦¶yeti',
			'ğŸchupacabra',
			'ğŸ‡jackalope',
			'ğŸœï¸desert',
			'ğŸï¸oasis',
			'ğŸªcamel',
			'ğŸœï¸caravan',
			'ğŸapple',
			'ğŸŒbanana',
			'ğŸ’cherry',
			'ğŸ‰watermelon',
			'ğŸ“strawberry',
			'ğŸ‹whale',
			'ğŸ¬dolphin',
			'ğŸ‡grape',
			'ğŸ¦ice cream',
			'ğŸ going home',
			'ğŸ«going to school',
			'ğŸ«chocolate',
			'ğŸ•pizza',
			'ğŸ”burger',
			'ğŸŒ­hot dog',
			'ğŸ¥ªsandwich',
			'ğŸªcookie',
			'ğŸ°cake',
			'ğŸ§penguin',
			'ğŸ¯tiger',
			'ğŸ¦lion',
			'ğŸ˜elephant',
			'ğŸ’monkey',
			'ğŸ»bear',
			'ğŸ¶dog',
			'ğŸ±cat',
			'ğŸ¦bird',
			'ğŸ´horse',
			'ğŸ‘sheep',
			'ğŸ„cow',
			'ğŸ·pig',
			'ğŸ”chicken',
			'ğŸ¦†duck',
			'ğŸ¦ƒturkey',
			'ğŸgoat',
			'ğŸ°rabbit',
			'ğŸºwolf',
			'ğŸ¢turtle',
			'ğŸsnake',
			'ğŸŸfish',
			'ğŸ™octopus',
			'ğŸ¦€crab',
			'ğŸ¦ˆshark',
			'ğŸ´seahorse',
			'ğŸŸstarfish',
			// Add emojis for NOUNS
			'ğŸapple',
			'ğŸ‘¶baby',
			'ğŸ”™back',
			'âš½ball',
			'ğŸ»bear',
			'ğŸ›ï¸bed',
			'ğŸ””bell',
			'ğŸ¦bird',
			'ğŸ‚birthday',
			'â›µboat',
			'ğŸ“¦box',
			'ğŸ‘¦boy',
			'ğŸbread',
			'ğŸ‘¨â€ğŸ‘¦brother',
			'ğŸ‚cake',
			'ğŸš—car',
			'ğŸ±cat',
			'ğŸª‘chair',
			'ğŸ”chicken',
			'ğŸ‘¶children',
			'ğŸ„Christmas',
			'ğŸ§¥coat',
			'ğŸŒ½corn',
			'ğŸ„cow',
			'ğŸ“…day',
			'ğŸ•dog',
			'ğŸª†doll',
			'ğŸšªdoor',
			'ğŸ¦†duck',
			'ğŸ¥šegg',
			'ğŸ‘ï¸eye',
			'ğŸŒ¾farm',
			'ğŸ‘¨â€ğŸŒ¾farmer',
			'ğŸ‘¨father',
			'ğŸ¦¶feet',
			'ğŸ”¥fire',
			'ğŸŸfish',
			'ğŸªŸfloor',
			'ğŸŒ¸flower',
			'ğŸ®game',
			'ğŸŒ»garden',
			'ğŸ‘§girl',
			'ğŸ‘‹goodbye',
			'ğŸŒ¿grass',
			'ğŸŒground',
			'âœ‹hand',
			'ğŸ‘¤head',
			'â›°ï¸hill',
			'ğŸ home',
			'ğŸ´horse',
			'ğŸ house',
			'ğŸ±kitty',
			'ğŸ¦µleg',
			'âœ‰ï¸letter',
			'ğŸ‘¨man',
			'ğŸ‘¨â€ğŸ‘¨â€ğŸ‘¦men',
			'ğŸ¥›milk',
			'ğŸ’°money',
			'ğŸŒ…morning',
			'ğŸ‘©mother',
			'ğŸ‘¤name',
			'ğŸªºnest',
			'ğŸŒƒnight',
			'ğŸ“„paper',
			'ğŸ‰party',
			'ğŸ–¼ï¸picture',
			'ğŸ·pig',
			'ğŸ°rabbit',
			'ğŸŒ§ï¸rain',
			'ğŸ’ring',
			'ğŸ¦œrobin',
			'ğŸ…Santa Claus',
			'ğŸ«school',
			'ğŸŒ±seed',
			'ğŸ‘sheep',
			'ğŸ‘shoe',
			'ğŸ‘§sister',
			'â„ï¸snow',
			'ğŸµsong',
			'ğŸ¿ï¸squirrel',
			'ğŸªµstick',
			'ğŸ›£ï¸street',
			'â˜€ï¸sun',
			'ğŸª‘table',
			'ğŸ”§thing',
			'â°time',
			'ğŸ”top',
			'ğŸ§¸toy',
			'ğŸŒ³tree',
			'âŒšwatch',
			'ğŸ’§water',
			'ğŸ›£ï¸way',
			'ğŸŒ¬ï¸wind',
			'ğŸªŸwindow',
			'ğŸªµwood'
		])
	);

	function handleClick(index) {
		if (winner || board[index]) return;
		board[index] = currentPlayer;
		checkWinner();
		currentPlayer = currentPlayer === 'X' ? 'O' : 'X';
	}

	function checkWinner() {
		const combinations = [
			[0, 1, 2],
			[3, 4, 5],
			[6, 7, 8],
			[0, 3, 6],
			[1, 4, 7],
			[2, 5, 8],
			[0, 4, 8],
			[2, 4, 6]
		];

		for (const combination of combinations) {
			if (
				board[combination[0]] &&
				board[combination[0]] === board[combination[1]] &&
				board[combination[0]] === board[combination[2]]
			) {
				winner = board[combination[0]];
				winningCombination = combination;
				return;
			}
		}

		if (!board.includes(null)) {
			winner = 'draw';
		}
	}

	function handleRestart() {
		board = Array(9).fill(null);
		currentPlayer = 'X';
		winner = null;
		winningCombination = null;
	}
</script>

<div class="board">
	{#each board as cell, index}
		<!-- svelte-ignore a11y-click-events-have-key-events -->
		<!-- svelte-ignore a11y-no-static-element-interactions -->
		<div
			class={`cell ${cell === 'X' ? 'x' : cell === 'O' ? 'o' : ''} ${winningCombination && winningCombination.includes(index) ? 'winning-cell' : ''}`}
			on:click={() => handleClick(index)}
		>
			{cell
				? cell === 'X'
					? words[Math.floor(Math.random() * words.length)]
					: words[Math.floor(Math.random() * words.length)]
				: ''}
		</div>
	{/each}
</div>

{#if winner}
	<div class="result">
		{#if winner === 'draw'}
			It's a draw!
		{:else}
			Player {winner} wins!
		{/if}
		<button on:click={handleRestart}>Restart</button>
	</div>
{:else}
	<div class="turn">
		Player {currentPlayer}'s turn
	</div>
{/if}

<style>
	.board {
		display: grid;
		width: 460px;
		margin: 0 auto;
		grid-template-columns: repeat(3, 1fr);
		grid-gap: 10px;
		border-radius: 1rem;
		background-color: rgb(193, 193, 193);
	}

	.cell {
		border-radius: 1rem;
		/* width: 150px; */
		height: 150px;
		display: flex;
		justify-content: center;
		align-items: center;
		font-size: 24px;
		font-weight: bold;
		text-align: center;
		cursor: pointer;
		box-shadow:
			rgba(50, 50, 93, 0.25) 0px 6px 12px -2px,
			rgba(0, 0, 0, 0.3) 0px 3px 7px -3px;
	}

	.cell:hover {
		box-shadow:
			rgb(85, 91, 255) 0px 0px 0px 3px,
			rgb(31, 193, 27) 0px 0px 0px 6px,
			rgb(255, 217, 19) 0px 0px 0px 9px,
			rgb(255, 156, 85) 0px 0px 0px 12px;
	}

	.cell:active {
		box-shadow:
			rgba(0, 0, 0, 0.25) 0px 54px 55px,
			rgba(0, 0, 0, 0.12) 0px -12px 30px,
			rgba(0, 0, 0, 0.12) 0px 4px 6px,
			rgba(0, 0, 0, 0.17) 0px 12px 13px,
			rgba(0, 0, 0, 0.09) 0px -3px 5px;
	}
	.x {
		background-color: #2f6eff;
	}

	.o {
		background-color: #ffca2a;
	}

	.winning-cell {
		/* background-color: #8cf652; */

		font-weight: bold;
		animation: mymove 2s infinite;
	}

	.winning-cell::after {
		content: 'ğŸ‘';
		font-size: 4rem;
		position: absolute;
		top: -10px;
		right: -10px;
		animation: winEmoji 1.5s infinite;
	}

	@keyframes winEmoji {
		0% {
			transform: rotate(0);
			top: -10px;
		}
		30% {
			transform: rotate(-20deg);
			top: -70px;
		}
		100% {
			transform: rotate(1deg);
			translate-y: -10px;
		}
	}

	@keyframes mymove {
		50% {
			transform: rotate(2deg);
			translate-y: 4px;
			background-color: #6ace34;
			margin: 1px;
		}
		100% {
			transform: rotate(-2deg);
			translate-y: -4px;
		}
	}

	.result {
		margin: 10px auto;
		font-size: 24px;
	}

	.turn {
		margin-top: 20px;
		font-size: 24px;
		margin: 10px auto;
	}
</style>
