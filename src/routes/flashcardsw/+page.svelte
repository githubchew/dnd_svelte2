<script>
	import { onMount } from "svelte";

	let flashcards = [];
	let frontInput = "";
	let backInput = "";
	const emojis = [
		"😀",
		"🎉",
		"🚀",
		"🌟",
		"🍕",
		"🐱",
		"🌈",
		"⚽",
		"🎸",
		"📚",
		"😃",
		"😄",
		"😁",
		"😆",
		"😅",
		"😂",
		"🤣",
		"😊",
		"😇",
		"🙂",
		"🙃",
		"😉",
		"😌",
		"😍",
		"🥰",
		"😘",
		"😗",
		"😙",
		"😚",
		"😋",
		"😛",
		"😜",
		"😝",
		"🤑",
		"🤗",
		"🤭",
		"🤫",
		"🤔",
		"🤐",
		"🤨",
		"😐",
		"😑",
		"😶",
		"😏",
		"😒",
		"🙄",
		"😬",
		"🤥",
		"😔",
		"😪",
		"🤤",
		"😴",
		"😷",
		"🤒",
		"🤕",
		"🤢",
		"🤮",
		"🤧",
		"😵",
		"🤯",
		"🤠",
		"🥳",
		"😎",
		"🤓",
		"🧐",
		"😕",
		"😟",
		"🙁",
		"☹️",
		"😮",
		"😯",
		"😲",
		"😳",
		"🥺",
		"😦",
		"😧",
		"😨",
		"😰",
		"😥",
		"😢",
		"😭",
		"😱",
		"😖",
		"😣",
		"😞",
		"😓",
		"😩",
		"😫",
		"🥱",
		"😤",
		"😡",
		"😠",
		"🤬",
		"😈",
		"👿",
		"💀",
		"☠️",
		"💩",
		"🤡",
		"👹",
		"👺",
		"👻",
		"👽",
		"👾",
		"🤖",
		"😺",
		"😸",
		"😹",
		"😻",
		"😼",
		"😽",
		"🙀",
		"😿",
		"😾",
		"🙈",
		"🙉",
		"🙊",
		"💋",
		"💌",
		"💘",
		"💝",
		"💖",
		"💗",
		"💓",
		"💞",
		"💕",
		"💟",
		"❣️",
		"💔",
		"❤️",
		"🧡",
		"💛",
		"💚",
		"💙",
		"💜",
		"🤎",
		"🖤",
		"🤍",
		"💯",
		"💢",
		"💥",
		"💫",
		"💦",
		"💨",
		"🕳️",
		"💣",
		"💬",
		"👁️‍🗨️",
		"🗨️",
		"🗯️",
		"💭",
		"💤",
		"👋",
		"🤚",
		"🖐️",
		"✋",
		"🖖",
		"👌",
		"🤏",
		"✌️",
		"🤞",
		"🤟",
		"🤘",
		"🤙",
		"👈",
		"👉",
		"👆",
		"👇",
		"☝️",
		"👍",
		"✊",
		"👊",
		"🤛",
		"🤜",
		"👏",
		"🙌",
		"👐",
		"🤲",
		"🤝",
		"🙏",
		"✍️",
		"💅",
		"🤳",
		"💪",
		"🦾",
		"🦵",
		"🦿",
		"🦶",
		"👂",
		"🦻",
		"👃",
		"🧠",
		"🫀",
		"🫁",
		"🦷",
		"🦴",
		"👀",
		"👁️",
		"👅",
		"👄",
		"🫦",
		"👶",
		"🧒",
		"👦",
		"👧",
		"🧑",
		"👱",
		"👨",
		"🧔",
		"🧔‍♂️",
		"🧔‍♀️",
		"👩",
		"🧓",
		"👴",
		"👵",
		"🙍",
		"🙍‍♂️",
		"🙍‍♀️",
		"🙎",
		"🙎‍♂️",
		"🙎‍♀️",
		"🙅",
		"🙅‍♂️",
		"🙅‍♀️",
		"🙆",
		"🙆‍♂️",
		"🙆‍♀️",
		"💁",
		"💁‍♂️",
		"💁‍♀️",
		"🙋",
		"🙋‍♂️",
		"🙋‍♀️",
		"🧏",
		"🧏‍♂️",
		"🧏‍♀️",
		"🙇",
		"🙇‍♂️",
		"🙇‍♀️",
		"🤦",
		"🤦‍♂️",
		"🤦‍♀️",
		"🤷",
		"🤷‍♂️",
		"🤷‍♀️",
		"🧎",
		"🧎‍♂️",
		"🧎‍♀️",
		"🙌",
		"👏",
		"👐",
		"🤲",
		"🤝",
		"🙏",
		"✍️",
		"💅",
		"🤳",
		"💪",
		"🦾",
		"🦵",
		"🦿",
		"🦶",
		"👂",
		"🦻",
		"👃",
		"🧠",
		"🫀",
		"🫁",
		"🦷",
		"🦴",
		"👀",
		"👁️",
		"👅",
		"👄",
		"🫦",
		"👶",
		"🧒",
		"👦",
		"👧",
		"🧑",
		"👱",
		"👨",
		"🧔",
		"🧔‍♂️",
		"🧔‍♀️",
		"👩",
		"🧓",
		"👴",
		"👵",
		"🦋",
		"🐝",
		"🐛",
		"🐜",
		"🦗",
		"🦟",
		"🦠",
		"🐞",
		"🐌",
		"🐚",
		"🐢",
		"🐍",
		"🦎",
		"🐙",
		"🦑",
		"🦐",
		"🦞",
		"🦀",
		"🐡",
		"🐠",
		"🐟",
		"🐬",
		"🐳",
		"🐋",
		"🦈",
		"🐊",
		"🐅",
		"🐆",
		"🐃",
		"🐂",
		"🐄",
		"🐎",
		"🐖",
		"🐏",
		"🐑",
		"🐐",
		"🦙",
		"🦘",
		"🦒",
		"🐪",
		"🐫",
		"🦓",
		"🐘",
		"🦏",
		"🦝",
		"🦢",
		"🦜",
		"🐦",
		"🐧",
		"🦅",
		"🦉",
		"🦩",
		"🦚",
		"🦗",
		"🦕",
		"🦖",
		"🦍",
		"🦮",
		"🐕",
		"🐈",
		"🐾",
		"🦸‍♂️",
		"🦸‍♀️",
		"🐿️",
		"🐁",
		"🐀",
		"🐇",
		"🐉",
		"🐈",
		"🦄",
		"🐩",
		"🐈‍⬛",
		"🐗",
		"🦝",
		"🦞",
		"🦀",
		"🦡",
		"🐻",
		"🐨",
		"🐻‍❄️",
		"🐻‍♀️",
		"🦓",
		"🦒",
		"🐕",
		"🐩",
		"🦄",
		"🦉",
		"🦩",
		"🦪",
		"🐿️",
		"🐅",
		"🐯",
		"🦦",
		"🐈",
		"🐕",
		"🐈",
		"🦖",
		"🐅",
		"🦀",
		"🦦",
		"🦣",
		"🦒",
		"🦝",
		"🐆",
		"🐝",
		"🦓",
		"🦝",
		"🦘",
		"🐿️",
		"🦓",
		"🐁",
		"🦝",
		"🦀",
		"🐿️",
		"🦣",
		"🦇",
		"🦤",
		"🐻",
		"🦣",
		"🦉",
		"🦓",
		"🐅",
		"🐖",
		"🐕",
		"🐈",
		"🐾"
	];
	const prebuiltBackInputs = [
		"Definition",
		"Example",
		"Translation",
		"Synonym",
		"Antonym",
		"a",
		"able",
		"about",
		"above",
		"across",
		"act",
		"action",
		"actually",
		"add",
		"addition",
		"adjective",
		"afraid",
		"Africa",
		"after",
		"again",
		"against",
		"age",
		"ago",
		"agreed",
		"ahead",
		"air",
		"all",
		"allow",
		"almost",
		"alone",
		"along",
		"already",
		"also",
		"although",
		"always",
		"am",
		"America",
		"among",
		"amount",
		"an",
		"and",
		"angle",
		"animal",
		"another",
		"answer",
		"any",
		"anything",
		"appear",
		"apple",
		"are",
		"area",
		"arms",
		"army",
		"around",
		"arrived",
		"art",
		"as",
		"ask",
		"at",
		"away",
		"baby",
		"back",
		"bad",
		"ball",
		"bank",
		"base",
		"be",
		"bear",
		"beat",
		"beautiful",
		"became",
		"because",
		"become",
		"bed",
		"been",
		"before",
		"began",
		"begin",
		"behind",
		"being",
		"believe",
		"bell",
		"belong",
		"below",
		"beside",
		"best",
		"better",
		"between",
		"big",
		"bill",
		"birds",
		"bit",
		"black",
		"block",
		"blood",
		"blow",
		"blue",
		"board",
		"boat",
		"body",
		"bones",
		"book",
		"born",
		"both",
		"bottom",
		"bought",
		"box",
		"boy",
		"branches",
		"break",
		"bright",
		"bring",
		"British",
		"broken",
		"brother",
		"brought",
		"brown",
		"build",
		"building",
		"built",
		"burning",
		"business",
		"but",
		"buy",
		"by",
		"called",
		"came",
		"can",
		"cannot",
		"can’t",
		"capital",
		"captain",
		"car",
		"care",
		"carefully",
		"carry",
		"case",
		"cat",
		"catch",
		"cattle",
		"caught",
		"cause",
		"cells",
		"center",
		"cents",
		"century",
		"certain",
		"chance",
		"change",
		"chart",
		"check",
		"chief",
		"child",
		"children",
		"choose",
		"church",
		"circle",
		"city",
		"class",
		"clean",
		"clear",
		"climbed",
		"close",
		"clothes",
		"cloud",
		"coast",
		"cold",
		"color",
		"column",
		"come",
		"common",
		"company",
		"compare",
		"complete",
		"compound",
		"conditions",
		"consider",
		"consonant",
		"contain",
		"continued",
		"control",
		"cook",
		"cool",
		"copy",
		"corn",
		"corner",
		"correct",
		"cost",
		"cotton",
		"could",
		"couldn’t",
		"count",
		"country",
		"course",
		"covered",
		"cows",
		"create",
		"cried",
		"crops",
		"cross",
		"crowd",
		"current",
		"cut",
		"dance",
		"dark",
		"day",
		"dead",
		"deal",
		"death",
		"decided",
		"decimal",
		"deep",
		"describe",
		"desert",
		"design",
		"had",
		"hair",
		"half",
		"hand",
		"happened",
		"happy",
		"hard",
		"has",
		"hat",
		"have",
		"he",
		"head",
		"hear",
		"heard",
		"heart",
		"heat",
		"heavy",
		"held",
		"help",
		"her",
		"here",
		"high",
		"hill",
		"him",
		"himself",
		"his",
		"history",
		"hit",
		"hoe",
		"hold",
		"hole",
		"home",
		"hope",
		"horse",
		"hot",
		"hours",
		"house",
		"how",
		"however",
		"huge",
		"human",
		"hundred",
		"hunting",
		"I",
		"ice",
		"idea",
		"if",
		"I’ll",
		"important",
		"in",
		"inches",
		"include",
		"increase",
		"Indian",
		"indicate",
		"industry",
		"information",
		"insects",
		"inside",
		"instead",
		"instruments",
		"interest",
		"interesting",
		"into",
		"iron",
		"is",
		"island",
		"isn’t",
		"it",
		"it’s",
		"itself",
		"Japanese",
		"job",
		"joined",
		"jumped",
		"just",
		"keep",
		"kept",
		"key",
		"killed",
		"kind",
		"king",
		"knew",
		"know",
		"known",
		"lady",
		"lake",
		"land",
		"language",
		"large",
		"last",
		"late",
		"laughed",
		"law",
		"lay",
		"lead",
		"learn",
		"least",
		"leave",
		"led",
		"left",
		"legs",
		"length",
		"less",
		"let",
		"let’s",
		"letter",
		"level",
		"lie",
		"life",
		"lifted",
		"light",
		"like",
		"line",
		"list",
		"listen",
		"little",
		"live",
		"located",
		"long",
		"look",
		"lost",
		"lot",
		"loud",
		"love",
		"low",
		"machine",
		"made",
		"main",
		"major",
		"make",
		"mall",
		"man",
		"many",
		"map",
		"march",
		"mark",
		"match",
		"material",
		"matter",
		"may",
		"maybe",
		"me",
		"means",
		"measure",
		"meat",
		"meet",
		"melody",
		"members",
		"men",
		"metal",
		"method",
		"middle",
		"might",
		"mile",
		"milk",
		"million",
		"mind",
		"mine",
		"minutes",
		"miss",
		"modern",
		"molecules",
		"moment",
		"money",
		"months",
		"moon",
		"more",
		"morning",
		"most",
		"mother",
		"mountains",
		"mouth",
		"move",
		"movement",
		"much",
		"music",
		"must",
		"my",
		"name",
		"nation",
		"natural",
		"near",
		"necessary",
		"need",
		"never",
		"new",
		"next",
		"night",
		"no",
		"north",
		"northern",
		"nose",
		"not",
		"note",
		"nothing",
		"notice",
		"noun",
		"now",
		"number",
		"numeral",
		"object",
		"observe",
		"ocean",
		"of",
		"off",
		"office",
		"often",
		"oh",
		"oil",
		"old",
		"on",
		"once",
		"one",
		"only",
		"open",
		"opposite",
		"or",
		"order",
		"other",
		"our",
		"out",
		"outside",
		"over",
		"own",
		"oxygen",
		"page",
		"paint",
		"pair",
		"paper",
		"paragraph",
		"park",
		"part",
		"particular",
		"party",
		"passed",
		"past",
		"pattern",
		"pay",
		"people",
		"per",
		"perhaps",
		"period",
		"person",
		"phrase",
		"picked",
		"picture",
		"piece",
		"place",
		"plains",
		"plan",
		"plane",
		"planets",
		"plant",
		"play",
		"please",
		"plural",
		"poem",
		"point",
		"pole",
		"poor",
		"position",
		"possible",
		"pounds",
		"power",
		"practice",
		"prepared",
		"present",
		"president",
		"pretty",
		"printed",
		"probably",
		"problem",
		"process",
		"produce",
		"products",
		"property",
		"provide",
		"pulled",
		"pushed",
		"put",
		"questions",
		"quickly",
		"quiet",
		"quite",
		"race",
		"radio",
		"rain",
		"raised",
		"ran",
		"rather",
		"reached",
		"read",
		"ready",
		"real",
		"reason",
		"received",
		"record",
		"red",
		"region",
		"remain",
		"remember",
		"repeated",
		"report",
		"represent",
		"rest",
		"result",
		"return",
		"rhythm",
		"rich",
		"ride",
		"right",
		"ring",
		"rise",
		"river",
		"road",
		"rock",
		"rolled",
		"room",
		"root",
		"rope",
		"rose",
		"round",
		"row",
		"rule",
		"run",
		"safe",
		"said",
		"sail",
		"same",
		"sand",
		"sat",
		"save",
		"saw",
		"say",
		"scale",
		"school",
		"science",
		"scientists",
		"score",
		"sea",
		"seat",
		"second",
		"section",
		"see",
		"seeds",
		"seem",
		"seen",
		"sell",
		"send",
		"sense",
		"sent",
		"sentence",
		"separate",
		"serve",
		"set",
		"settled",
		"seven",
		"several",
		"shall",
		"shape",
		"sharp",
		"she",
		"ship",
		"shoes",
		"shop",
		"short",
		"should",
		"shoulder",
		"shouted",
		"show",
		"shown",
		"side",
		"sight",
		"sign",
		"silent",
		"similar",
		"simple",
		"since",
		"sing",
		"single",
		"sir",
		"sister",
		"sit",
		"site",
		"six",
		"size",
		"skin",
		"sky",
		"sleep",
		"slowly",
		"small",
		"smell",
		"smiled",
		"snow",
		"so",
		"soft",
		"soil",
		"soldiers",
		"solution",
		"solve",
		"some",
		"someone",
		"something",
		"sometimes",
		"son",
		"song",
		"soon",
		"sound",
		"south",
		"southern",
		"space",
		"speak",
		"special",
		"speed",
		"spell",
		"spot",
		"spread",
		"spring",
		"square",
		"stand",
		"stars",
		"start",
		"state",
		"statement",
		"stay",
		"steel",
		"step",
		"stick",
		"still",
		"stone",
		"stood",
		"stop",
		"store",
		"story",
		"straight",
		"strange",
		"stream",
		"street",
		"stretched",
		"string",
		"strong",
		"students",
		"study",
		"subject",
		"substances",
		"such",
		"suddenly",
		"suffix",
		"sugar",
		"suggested",
		"sum",
		"summer",
		"sun",
		"supply",
		"suppose",
		"sure",
		"surface",
		"surprise",
		"swim",
		"syllables",
		"symbols",
		"system",
		"table",
		"take",
		"talk",
		"tall",
		"teacher",
		"team",
		"tell",
		"temperature",
		"ten",
		"terms",
		"test",
		"than",
		"that",
		"the",
		"their",
		"them",
		"themselves",
		"then",
		"there",
		"these",
		"they",
		"thick",
		"thin",
		"things",
		"think",
		"third",
		"this",
		"those",
		"though",
		"thought",
		"thousands",
		"three",
		"through",
		"thus",
		"tied",
		"time",
		"tiny",
		"to",
		"today",
		"together",
		"told",
		"tone",
		"too",
		"took",
		"tools",
		"top",
		"total",
		"touch",
		"toward",
		"town",
		"track",
		"trade",
		"train",
		"travel",
		"tree",
		"triangle",
		"trip",
		"trouble",
		"truck",
		"true",
		"try",
		"tube",
		"turn",
		"two",
		"type",
		"uncle",
		"under",
		"underline",
		"understand",
		"unit",
		"until",
		"up",
		"upon",
		"us",
		"use",
		"usually",
		"valley",
		"value",
		"various",
		"verb",
		"very",
		"view",
		"village",
		"visit",
		"voice",
		"vowel",
		"wait",
		"walk",
		"wall",
		"want",
		"war",
		"warm",
		"was",
		"wash",
		"Washington",
		"wasn’t",
		"watch",
		"water",
		"waves",
		"way",
		"we",
		"wear",
		"weather",
		"week",
		"weight",
		"we’ll",
		"well",
		"went",
		"were",
		"west",
		"western",
		"what",
		"wheels",
		"when",
		"where",
		"whether",
		"which",
		"while",
		"white",
		"who",
		"whole",
		"whose",
		"why",
		"wide",
		"wife",
		"wild",
		"will",
		"win",
		"wind",
		"window",
		"wings",
		"winter",
		"wire",
		"wish",
		"with",
		"within",
		"without",
		"woman",
		"women",
		"wonder",
		"won’t",
		"wood",
		"words",
		"work",
		"workers",
		"world",
		"would",
		"wouldn’t",
		"write",
		"written",
		"wrong",
		"wrote",
		"yard",
		"years",
		"yellow",
		"yes",
		"yet",
		"you",
		"young",
		"your",
		"you’re",
		"yourself"
	];

	let fontSize = 18; // Default font size

	function increaseFontSize() {
		fontSize += 2; // Increase font size by 2px
	}

	function decreaseFontSize() {
		fontSize = Math.max(10, fontSize - 2); // Decrease font size by 2px, minimum 10px
	}

	function addFlashcard() {
		const front = frontInput || getRandomEmoji();
		const back = backInput || getRandomPrebuiltBackInput();
		if (front && back) {
			flashcards = flashcards.concat({ front, back, showBack: false });
			frontInput = "";
			backInput = "";
		}
	}

	function getRandomEmoji() {
		return emojis[Math.floor(Math.random() * emojis.length)];
	}

	function getRandomPrebuiltBackInput() {
		return prebuiltBackInputs[Math.floor(Math.random() * prebuiltBackInputs.length)];
	}

	function toggleBack(index) {
		flashcards = flashcards.map((card, i) =>
			i === index ? { ...card, showBack: !card.showBack } : card
		);
	}

	function handleKeydown(event) {
		if (event.key === "Enter") {
			addFlashcard();
		}
	}

	function shuffleFlashcards() {
		flashcards = flashcards
			.map((value) => ({ value, sort: Math.random() }))
			.sort((a, b) => a.sort - b.sort)
			.map(({ value }) => value);
	}

	function addRandomEmojiFlashcard() {
		// Add 20 random emoji flashcards
		for (let i = 0; i < 20; i++) {
			const front = getRandomEmoji();
			const back = getRandomPrebuiltBackInput();
			flashcards = flashcards.concat({ front, back, showBack: false });
		}
	}

	// New function to get a random emoji for filtering
	function getRandomEmojiForFilter() {
		return getRandomEmoji();
	}

	// Store a random emoji for filtering
	const randomEmojiForFilter = getRandomEmojiForFilter();

	function clearFlashcards() {
		flashcards = [];
	}
</script>

<div>
	<h1>Flashcard App</h1>
	<input type="text" placeholder="Front side" bind:value={frontInput} on:keydown={handleKeydown} />
	<input type="text" placeholder="Back side" bind:value={backInput} on:keydown={handleKeydown} />
	<button on:click={addFlashcard}>Add Flashcard</button>
	<button on:click={shuffleFlashcards}>Shuffle Flashcards</button>
	<button on:click={addRandomEmojiFlashcard}>Add Random Emoji Flashcard</button>
	<button on:click={clearFlashcards}>Clear All Flashcards</button>

	<!-- New buttons for font size adjustment -->
	<button on:click={increaseFontSize}>Increase Font Size</button>
	<button on:click={decreaseFontSize}>Decrease Font Size</button>

	<h2>Custom Flashcards</h2>
	<div>
		{#each flashcards as { front, back, showBack }, index}
			<div
				class="flashcard bounce"
				on:click={() => {
					toggleBack(index);
					setTimeout(() => {
						flashcards[index].bounce = false;
					}, 300);
				}}
				style="font-size: {fontSize}px;"
			>
				<div class="card-inner {showBack ? 'showBack' : ''}">
					<div class="card-face card-front">
						{front}
					</div>
					<div class="card-face card-back">
						{back}
					</div>
				</div>
			</div>
		{/each}
	</div>

	<h2>Random Emoji Flashcards</h2>
	<div>
		{#each flashcards.filter((card) => card.front === randomEmojiForFilter) as { front, back, showBack }, index}
			<div
				class="flashcard bounce"
				on:click={() => {
					toggleBack(index);
					setTimeout(() => {
						flashcards[index].bounce = false;
					}, 300);
				}}
				style="font-size: {fontSize}px;"
			>
				<div class="card-inner {showBack ? 'showBack' : ''}">
					<div class="card-face card-front">
						{front}
					</div>
					<div class="card-face card-back">
						{back}
					</div>
				</div>
			</div>
		{/each}
	</div>
</div>

<style>
	.flashcard {
		perspective: 1000px;
		display: inline-block;
		margin: 5px;
		cursor: pointer;
		transition: transform 0.2s;
	}

	.flashcard.bounce {
		transform: scale(1.1);
		animation: bounce 0.3s ease forwards;
	}

	@keyframes bounce {
		0%,
		100% {
			transform: scale(1);
		}
		50% {
			transform: scale(1.1);
		}
	}

	.card-inner {
		position: relative;
		width: 100px;
		height: 100px;
		text-align: center;
		transition: transform 0.6s;
		transform-style: preserve-3d;
	}

	.card-inner.showBack {
		transform: rotateY(180deg);
	}

	.card-face {
		position: absolute;
		width: 100%;
		height: 100%;
		backface-visibility: hidden;
		display: flex;
		align-items: center;
		justify-content: center;
		border: 1px solid #ccc;
		padding: 10px;
		box-sizing: border-box;
		border-radius: 15px;
	}

	.card-front {
		background-color: #fff;
	}

	.card-back {
		background-color: #f0f0f0;
		transform: rotateY(180deg);
	}

	@keyframes float {
		0% {
			transform: translateY(0);
		}
		50% {
			transform: translateY(-10px);
		}
		100% {
			transform: translateY(0);
		}
	}

	.card-face.card-front {
		animation: float 3s ease-in-out infinite;
	}
</style>
